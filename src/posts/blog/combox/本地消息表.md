设计上和消息中心的思想是一致的

设计图：

设计思想
1. 业务操作与消息记录在同一个本地事务中
2. 必须业务操作事务真正提交后才准确触发真正的消息发送，同时记录发送的状态
3. 要有定时任务进行补偿手法，对于一定时间内没有发送成功的重新发送，根据重试次数触发，如果仍然发送失败，必须告警和人工介入
4. 对于mq，下游接收到消息必须保证消费的幂等，幂等有两种情况，一种是返回相同结果，第二种就是抛出异常

